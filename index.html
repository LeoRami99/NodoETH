<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="bootstrap/bootstrap.min.css">
    <script src="bootstrap/bootstrap.bundle.min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="styles.css">
    <!-- <link rel="stylesheet" href="/css/master.css"> -->
    <!-- Vamos a implementar la API de web3 -->
    <script src="web3.min.js"></script>
    <!-- <script src="web3.min.js.map"></script> -->
    <script>
        // a continuación vamos a construir una funcion para suministrar el web3
        window.addEventListener('load', function() {
            if (typeof web3 !== 'undefined') {
                console.log("Web3 exitoso"+ web3.currentProvider.constructor.name);
                window.web3 = new Web3(Web3.currentProvider);
            }else{
                console.log("No quedo bien el web3");
                window.web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545 "));
            }
        })
        //Funcion
        function getBalance() {
            var address, wei, balance;
            address= document.getElementById("address").value;
            try {
                web3.eth.getBalance(address,function(error, wei) {
                    if (!error) {
                        var balance=web3.utils.fromWei(wei, 'ether');
                        var out = document.getElementById("output")
                        out.innerHTML=balance+" ETH";
                        out.className += "alert alert-success";
                    }
                })
            } catch (err) {
                var out = document.getElementById("output")
                out.innerHTML=err;
                  out.className += "alert alert-danger";

            }
        }
        //vamos a configurar el localhost

    </script>
    <title>Document</title>
</head>
<body>
      <nav class="navbar navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img src="logo-nuevo-70.png" alt="" width="150" height="50" class="d-inline-block align-text-top">
        </a>
        <a href="crearCuenta.html" type="button" class="btn btn-outline-success">Crear Cuenta</a>
      </div>
    </nav>

    <form class="m-0 vh-100 row justify-content-center align-items-center" method="#">
      <div class="col-auto p-5 text-center">
        <h1>Nodo Ethereum</h1>
        <input type="text" id="address" class="form-control input-address" placeholder="Ingrese la dirección de su cuenta">
        <button type="button" onclick="getBalance()" class="boton">Enviar</button>
        <div id="output"></div>
      </div>
    </form>


</body>
</html>
